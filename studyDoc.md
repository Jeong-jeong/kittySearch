## ğŸ”¥ í”„ë¡œì íŠ¸ ê³¼ì • ì†Œê°œ

ìš”êµ¬ì‚¬í•­ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ `studyDocs`ì— ê¸°ë¡í•˜ì˜€ìœ¼ë©°, **íŠ¹íˆ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì€ ë³„í‘œ(â­ï¸) ì²˜ë¦¬**í•˜ì˜€ìŠµë‹ˆë‹¤.

```shell
  ğŸ’¡ íŠ¹ì • ìš”êµ¬ì‚¬í•­ í•´ê²°ê³¼ì •ì„ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ í´ë¦­í•˜ì—¬ ë§í¬ë¥¼ ë”°ë¼ê°€ ì£¼ì„¸ìš”!
```

<br>

### 1. [ì½”ë“œ êµ¬ì¡°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#1-ì½”ë“œ-êµ¬ì¡°)

- [ES6 ëª¨ë“ˆ í˜•íƒœë¡œ ì½”ë“œ ë³€ê²½í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#es6-ëª¨ë“ˆ-í˜•íƒœë¡œ-ì½”ë“œ-ë³€ê²½í•˜ê¸°)
- [async, await ë¬¸ìœ¼ë¡œ ìˆ˜ì •í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#async--await-ë¬¸ìœ¼ë¡œ-ìˆ˜ì •)

### 2. [HTML, CSS](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#2-html-css)

- [ì‹œë©˜í‹± ì½”ë“œë¡œ ë³€ê²½í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ì‹œë©˜í‹±-ì½”ë“œë¡œ-ë³€ê²½í•˜ê¸°)
- [ë°˜ì‘í˜• ì²˜ë¦¬í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ë°˜ì‘í˜•-ì²˜ë¦¬í•˜ê¸°)
- [ë‹¤í¬ëª¨ë“œ ì§€ì›í•˜ê¸° with localStorage](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ë‹¤í¬ëª¨ë“œ-ì§€ì›í•˜ê¸°)

### 3. [ì´ë¯¸ì§€ ìƒì„¸ë³´ê¸° ëª¨ë‹¬](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#3-ì´ë¯¸ì§€-ìƒì„¸ë³´ê¸°-ëª¨ë‹¬)

- [768px ì´í•˜ì¼ ë•Œ ëª¨ë‹¬ ê¸¸ì´ ëŠ˜ë¦¬ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#768px-ì´í•˜ì¼-ë•Œ-ë””ë°”ì´ìŠ¤-ê°€ë¡œ-ê¸¸ì´ë§Œí¼-ëª¨ë‹¬-ê¸¸ì´ë¥¼-ëŠ˜ë¦¬ê¸°)
- [ëª¨ë‹¬ close ì²˜ë¦¬í•˜ê¸° â­ï¸](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ëª¨ë‹¬-close-ì²˜ë¦¬)
- [ëª¨ë‹¬ì—ì„œ ê³ ì–‘ì´ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ëª¨ë‹¬ì—ì„œ-ê³ ì–‘ì´ì˜-ì„±ê²©-íƒœìƒ-ì •ë³´ë¥¼-ë¶ˆëŸ¬ì˜¤ê¸°)
  - [ëª¨ë‹¬ ì—´ê³  ë‹«ê¸°ì— ì• ë‹ˆë©”ì´ì…˜ ì ìš©í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ì¶”ê°€-ëª¨ë‹¬-ì—´ê³ -ë‹«ê¸°ì—-fade-inoutì„-ì ìš©)

### 4. [ê²€ìƒ‰ í˜ì´ì§€](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#4-ê²€ìƒ‰-í˜ì´ì§€)

- [ê²€ìƒ‰ í˜ì´ì§€ ì§„ì… ì‹œ focus ì²˜ë¦¬í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ê²€ìƒ‰-í˜ì´ì§€-ì§„ì…-ì‹œ-input-focus-ì²˜ë¦¬)
- [input í´ë¦­ ì‹œ ê¸°ì¡´ í‚¤ì›Œë“œ ì‚­ì œí•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#input-í´ë¦­-ì‹œ-ê¸°ì¡´-í‚¤ì›Œë“œ-ì‚­ì œì²˜ë¦¬)
- [í•„ìˆ˜ ê²€ìƒ‰ ê²°ê³¼ ì—†ì„ ë•Œ UI ì²˜ë¦¬](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#í•„ìˆ˜-ê²€ìƒ‰-ê²°ê³¼ê°€-ì—†ì„-ë•Œ-ui-ì²˜ë¦¬)
- [ìµœê·¼ ê²€ìƒ‰ì–´ ì²˜ë¦¬ â­ï¸](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ìµœê·¼-ê²€ìƒ‰-5ê°œê¹Œì§€-í‚¤ì›Œë“œ-êµ¬í˜„)
- [ìƒˆë¡œê³ ì¹¨ ì‹œ ë§ˆì§€ë§‰ í™”ë©´ ìœ ì§€í•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ìƒˆë¡œ-ê³ ì¹¨-ì‹œ-ë§ˆì§€ë§‰-ê²€ìƒ‰-í™”ë©´-ìœ ì§€)
- [50ë§ˆë¦¬ ëœë¤ ê³ ì–‘ì´ ì‚¬ì§„ ë¿Œë¦¬ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#50ë§ˆë¦¬-ëœë¤-ê³ ì–‘ì´-ì‚¬ì§„-ë¿Œë¦¬ê¸°)
- [ì´ë¯¸ì§€ lazy ë¡œë”© ì²˜ë¦¬í•˜ê¸° â­ï¸](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ì´ë¯¸ì§€-lazy-ë¡œë”©-ì²˜ë¦¬í•˜ê¸°)
- [ê³ ì–‘ì´ ì‚¬ì§„ hover ì‹œ ì´ë¦„ ë…¸ì¶œí•˜ê¸°](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#ê³ ì–‘ì´-ì‚¬ì§„-hover-ì‹œ-ì´ë¦„-ë…¸ì¶œ)

### 5. [ìŠ¤í¬ë¡¤ í˜ì´ì§• êµ¬í˜„ â­ï¸](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#5-ìŠ¤í¬ë¡¤-í˜ì´ì§•-êµ¬í˜„)

### 6. [webpack ì„¤ì • ë° ë°°í¬](https://github.com/Jeong-jeong/kittySearch/blob/main/studyDoc.md#6-webpack-ì„¤ì •-ë°-ë°°í¬-1)

<br>
<br>

## 1. ì½”ë“œ êµ¬ì¡°

### ES6 ëª¨ë“ˆ í˜•íƒœë¡œ ì½”ë“œ ë³€ê²½í•˜ê¸°

scriptë¥¼ ë…ë¦½ëœ ìŠ¤ì½”í”„ë¥¼ ê°€ì§„ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ë³€ê²½í•˜ë ¤ë©´ script íƒœê·¸ì˜ `typeì„ module`ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.

```js
<script type="module" src="src/main.js"></script>
```

ES6 ëª¨ë“ˆì€ import, export, export default í‚¤ì›Œë“œë“¤ì„ ì‚¬ìš©í•œë‹¤. `package.jsonì˜ type í•„ë“œ`ë¥¼ í†µí•´ ëª¨ë“ˆ ì¢…ë¥˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ìƒëµë  ê²½ìš° common.js ëª¨ë“ˆ ë°©ì‹ì´ë‹¤.

```js
{
// ...ìƒëµ
"type": "module",
// ...ìƒëµ
}
```

### async , await ë¬¸ìœ¼ë¡œ ìˆ˜ì •.

- í•´ë‹¹ ì½”ë“œë“¤ì€ ì—ëŸ¬ê°€ ë‚¬ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ì„œ ì ì ˆíˆ ì²˜ë¦¬ ë¶„ê¸°.
  - API ì˜ status code ì— ë”°ë¼ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í•˜ê¸°.

```js
fetchCats: async (keyword) => {
    try {
      const result = await fetch(
        `${API_ENDPOINT}/api/cats/search?q=${keyword}`
      );
      if (result.ok) { // result.ok ì¼ ë•Œ return
        return result.json();
      } else {
        const errorData = await result.json();
        throw errorData;
      }
    } catch (e) { // ì—ëŸ¬ê°€ ë‚¬ì„ ë•Œ throw í•œ ì—ëŸ¬ ìºì‹œ í›„ status, message ë³´ì—¬ì£¼ê¸°
      throw {
        status: e.status,
        message: e.message,
      };
    }
  },
```

## 2. HTML, CSS

### ì‹œë©˜í‹± ì½”ë“œë¡œ ë³€ê²½í•˜ê¸°

**ImageInfo**

ê¸°ì¡´ì— div íƒœê·¸ë“¤ì„ `h1, button, strong, dl` íƒœê·¸ ë“±ì„ ì‚¬ìš©í•´ ì‹œë©˜í‹± í•˜ê²Œ ë³€ê²½í•˜ì˜€ë‹¤.
íŠ¹íˆ description ë¶€ë¶„ì€ **AëŠ” B í˜•íƒœë¡œ ì‚¬ì „ í˜•ì‹**ì¸ë°, ë‹¨ìˆœ divë¡œ ë‚˜ë‰˜ì–´ ìˆì–´ `dl, dt, dd`ë¡œ ë³€ê²½í•˜ê³  ì‹œë©˜í‹± íƒœê·¸ë¡œ ë³€ê²½í•˜ë©´ì„œ ê¸°ì¡´ì˜ css reset ì²˜ë¦¬ê°€ ë˜ì–´ ìˆì§€ ì•Šì•„ css íŒŒì¼ì— ì¶”ê°€í•˜ì˜€ë‹¤.

```js
<div class="content-wrapper">
  <h1 class="title">
    <strong>${name}</strong>
    <button class="close">x</button>
  </h1>
  <img src="${url}" alt="${name}"/>
  <dl class="description">
    <dt>ì„±ê²©:<dt>
      <dd>${temperament}</dd>
  </dl>
  <dl class="description">
    <dt>íƒœìƒ:<dt>
      <dd>${origin}</dd>
</div>`;
```

**SearchResult**

SearchResultì˜ ë¦¬ìŠ¤íŠ¸ë“¤ì„ div -> `li`ë¡œ ë³€ê²½í•˜ê³  ìƒìœ„ íƒœê·¸ë¥¼ `ul`ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

```js
  this.$searchResult = document.createElement("ul");

  // ... ìƒëµ
  <li class="item">
    <img src=${cat.url} alt=${cat.name} />
  </li>
```

### ë°˜ì‘í˜• ì²˜ë¦¬í•˜ê¸°

SearchResultì— ì‘ì„±ëœ gridëŠ” ìµœì†Œ widthê°€ 250ìœ¼ë¡œ ì •í•´ì ¸ ìˆì—ˆì§€ë§Œ, í¬ê¸°ë¥¼ ì¤„ì´ë‹¤ 250ì´í•˜ë¡œ ê°€ê²Œ ë˜ë©´ í™”ë©´ì´ ë°€ë¦¬ëŠ” í˜„ìƒì´ ë°œìƒí•´ `1fr`ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

```css
@media screen and (max-width: 992px) {
  .SearchResult {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media screen and (max-width: 768px) {
  .SearchResult {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media screen and (max-width: 576px) {
  .SearchResult {
    grid-template-columns: repeat(1, 1fr);
  }
}
```

### ë‹¤í¬ëª¨ë“œ ì§€ì›í•˜ê¸°

ë‹¤í¬ëª¨ë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ OSì˜ ë‹¤í¬ëª¨ë“œ í™œì„±í™” ì—¬ë¶€ì— ë”°ë¼ ë™ì‘í•˜ë˜, ìœ ì €ê°€ toggle í•˜ì—¬ ëª¨ë“œë¥¼ ì„ íƒí•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. ì¶”ê°€ë¡œ `localStorage`ì— í† ê¸€ ê°’ì„ ì €ì¥í•˜ì—¬ ìƒˆë¡œê³ ì¹¨ ì‹œì— ì´ì „ ëª¨ë“œë¥¼ ìœ ì§€í•˜ë„ë¡ í–ˆë‹¤.

```css
:root {
  /* ì „ì—­ ë³€ìˆ˜ ì €ì¥ */
  --color-mode: "light";
  --color-dark: #000000;
  --color-light: #ffffff;
  --background: #ffffff;
  --text-color: #000000;
}

.dark {
  /* ìœ ì € ë‹¤í¬ëª¨ë“œ toggle */
  background-color: var(--color-dark);
  color: var(--color-light);
}
```

í•´ë‹¹ ë¡œì§ì€ ì™¸ë¶€ì—ì„œ onClickì„ ë°›ì•„ì˜¤ëŠ” ê²ƒë³´ë‹¤ **ë‚´ë¶€ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒ**ì´ ë” ì¢‹ë‹¤ê³  íŒë‹¨í–ˆë‹¤. OS ë‹¤í¬ëª¨ë“œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ `window.matchMedia`ì˜ `matches ì†ì„±`ìœ¼ë¡œ boolean ê°’ì„ ë°›ì•„ì˜¨ ë’¤ currentModeì— ì €ì¥í–ˆë‹¤.

```js
this.currentMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  ? "dark"
  : "light";
```

ì „ì²´ì ìœ¼ë¡œ **ë¡œì»¬ìŠ¤í† ë¦¬ì§€**ì— ë§ì¶° ë¡œì§ì´ í˜ëŸ¬ê°€ê¸° ë•Œë¬¸ì— ì²« ë Œë”ë§ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ê°’ì´ ìˆìœ¼ë©´ ê·¸ ê°’ìœ¼ë¡œ ëª¨ë“œë¥¼ ë³€ê²½í•˜ê³  ì•„ë‹ ê²½ìš° OS ëª¨ë“œë¡œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•œë‹¤.

```js
setItem(
  COLOR_MODE_KEY,
  getItem(COLOR_MODE_KEY) ? getItem(COLOR_MODE_KEY) : this.currentMode
);
```

`render í•¨ìˆ˜` ì—ì„  ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê°’ì„ ê°€ì ¸ì˜¨ ë’¤ bodyì™€ buttonì— ëª¨ë“œ í´ë˜ìŠ¤ë¥¼ ë„£ì–´ì¤€ë‹¤. ë§Œì•½ ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í† ê¸€í•  ë• toggleMode() í•¨ìˆ˜ê°€ ì‘ë™í•œë‹¤.
`toggleMode í•¨ìˆ˜`ëŠ” bodyì™€ ë²„íŠ¼ì˜ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•˜ê³ , ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ëª¨ë“œ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.

```js
  toggleMode() {
    const body = document.querySelector("body");
    body.classList.toggle("dark");
    this.$ToggleDarkmode.classList.toggle("dark");

    const checkHasDark = body.classList.contains("dark");
    this.$ToggleDarkmode.innerText = checkHasDark
      ? "ë¼ì´íŠ¸ ëª¨ë“œ ğŸŒ•"
      : "ë‹¤í¬ëª¨ë“œ ğŸŒ‘";
    setItem(COLOR_MODE_KEY, checkHasDark ? "dark" : "light");
  }
```

## 3. ì´ë¯¸ì§€ ìƒì„¸ë³´ê¸° ëª¨ë‹¬

### 768px ì´í•˜ì¼ ë•Œ, ë””ë°”ì´ìŠ¤ ê°€ë¡œ ê¸¸ì´ë§Œí¼ ëª¨ë‹¬ ê¸¸ì´ë¥¼ ëŠ˜ë¦¬ê¸°.

```css
@media screen and (max-width: 768px) {
  .ImageInfo .content-wrapper {
    width: 100vw;
  }
}
```

### ëª¨ë‹¬ close ì²˜ë¦¬

- ëª¨ë‹¬ ì˜ì—­ ë°–ì„ ëˆ„ë¥´ê±°ë‚˜ / í‚¤ë³´ë“œì˜ ESC í‚¤ë¥¼ ëˆ„ë¥´ê±°ë‚˜ / ëª¨ë‹¬ ìš°ì¸¡ì˜ ë‹«ê¸°(x) ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹«íˆë„ë¡ ìˆ˜ì •.

ì´ ë¶€ë¶„ì€ `onClose`ì™€ `onKeyDownClose` ë©”ì„œë“œë¡œ ë¶„ë¦¬í•˜ì—¬ addEventListenerì— ê±¸ì–´ì£¼ì—ˆë‹¤. ëª¨ë‹¬ ì²˜ë¦¬ ì‹œ ëª‡ê°€ì§€ ë¬¸ì œê°€ ë°œìƒí–ˆëŠ”ë° í•˜ë‚˜í•˜ë‚˜ ì •ë¦¬í•´ë³´ê² ë‹¤.

```
1. ë©”ì„œë“œë¡œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ë“±ë¡í•  ë•Œ ì´ë²¤íŠ¸ ê°ì²´ë¥¼ ë°›ì§€ ëª»í•´ ì½œë°± í˜•ì‹ìœ¼ë¡œ ë„˜ê²¨ì£¼ì–´ì•¼ í–ˆë‹¤.
2. keydown ì´ë²¤íŠ¸ê°€ $imageInfoì— ê±¸ë¦¬ì§€ ì•Šì•˜ë‹¤.
   $imageInfoëŠ” div ì—˜ë¦¬ë¨¼íŠ¸ì´ë¯€ë¡œ, í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë¥¼ ê±¸ì–´ì£¼ê¸° ìœ„í•´ì„  tabIndexë¥¼ ë„£ì–´ì£¼ì–´ì•¼ í•œë‹¤ê³  í•œë‹¤.

```

```js
$imageInfo.setAttribute("tabindex", 0);

this.$imageInfo?.addEventListener("click", (e) => this.onClose(e));
```

#### ğŸš€ trouble shooting

documentì— ê±¸ê¸° ë³´ë‹¨ ìµœëŒ€í•œ ë²”ìœ„ë¥¼ ì¢ê²Œí•˜ëŠ” ê²Œ ì´ë²¤íŠ¸ íë¦„ì„ íŒŒì•…í•˜ê¸° ì‰½ê¸° ë•Œë¬¸ì— this.`$imageInfo`ì— `tabindex`ë¥¼ ê±¸ì—ˆë”ë‹ˆ ì˜ ì‘ë™ë˜ì—ˆë‹¤! ë‹¤ë§Œ `$imageInfo`ë‚˜ `document`ì— ê±¸ë¦° **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ renderê°€ ë  ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ê°€ ì¤‘ì²©**ìœ¼ë¡œ ìŒ“ì˜€ë‹¤. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ render í•¨ìˆ˜ì— ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì´ì—ˆë‹¤.
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ˆê¸°í™”ë¥¼ ë‹´ë‹¹í•˜ëŠ” constructorì— ì‘ì„±í•´ì•¼ í•˜ëŠ”ë° **constructorì—ì„œëŠ” ì—…ë°ì´íŠ¸ëœ ìƒíƒœê°’ì„ ì¶”ì í•  ìˆ˜ ì—†ì–´** render í•¨ìˆ˜ ë‚´ì—ì„œ í•´ê²°í•˜ëŠ” ê²Œ í•„ìˆ˜ì ì´ì—ˆë‹¤.

ë‚´ê°€ ìƒê°í•´ë‚¸ í•´ê²°ë°©ì•ˆì€ ë‘ê°€ì§€ì´ë‹¤.

```
1. ëª¨ë‹¬ì´ ì‚¬ë¼ì§ˆ ë•Œ keydown ì´ë²¤íŠ¸ë¥¼ remove ì‹œì¼œì£¼ê¸°.
- ì½œë°±í˜•íƒœë¡œëŠ” ì œê±°í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— debounceë¡œ ê°ì‹¸ì§„ í•¨ìˆ˜ì˜ ë©”ì„œë“œë¥¼ ë˜ ìƒì„±í•´ì•¼ í•œë‹¤.

2. ìì‹ìš”ì†Œì¸ content-wrapperì—ì„œ ì´ë²¤íŠ¸ë¥¼ ê±¸ì–´ì£¼ê¸°. âœ…
- content-wrapperëŠ” render í˜¸ì¶œ ì‹œë§ˆë‹¤ ìƒˆë¡œ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ë¥¼ í•´ì œí•  í•„ìš”ê°€ ì—†ë‹¤.
- tabindexë¡œ í‚¤ë³´ë“œ ì´ë²¤íŠ¸ë¥¼ ê±¸ ê²½ìš° focusê°€ ìˆì–´ì•¼ ì‘ë™í•œë‹¤.
  ë Œë” ì‹œ content-wrapperì— focus()ë¥¼ ì¤˜ì„œ ë”°ë¡œ í¬ì»¤ìŠ¤ë¥¼ ì£¼ì§€ ì•Šì•„ë„ í‚¤ë³´ë“œ ì´ë²¤íŠ¸ê°€ ë™ì‘í•˜ë„ë¡ í–ˆë‹¤.
```

```js
// ìˆ˜ì •ì „

document.addEventListener(
  "keydown",
  debounce((e) => {
    this.onKeydownClose(e);
  }, variables.animationTime)
);
```

```js
const $contentWrapper = document.querySelector(".content-wrapper");
$contentWrapper.focus();

$contentWrapper.addEventListener(
  "keydown",
  debounce((e) => {
    this.onKeydownClose(e);
  }, variables.keyboardEventTime)
);
```

### ëª¨ë‹¬ì—ì„œ ê³ ì–‘ì´ì˜ ì„±ê²©, íƒœìƒ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸°.

ê¸°ì¡´ì— `SearchResult` ì»´í¬ë„ŒíŠ¸ì—ì„œ í´ë¦­í•˜ë©´ idê°’ì„ ë°›ì•„ì˜¤ëŠ” ë¡œì§ì´ êµ¬í˜„ë˜ì–´ ìˆì—ˆë‹¤. ë‚´ê°€ í•  ì¼ì€ idê°’ìœ¼ë¡œ api ìš”ì²­ í›„ ê¸°ì¡´ stateì— ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

```js
// App.js
this.searchResult = new SearchResult({
  $target,
  initialData: this.data,
  onClick: (image) => {
    this.imageInfo.setState({
      visible: true,
      image,
    });
  },
});

// SearchResult.js
// ê¸°ì¡´ì— ìˆë˜ ë¡œì§ì„ ë©”ì„œë“œë¡œ ë¶„ë¦¬
findIndexWithClick(e) {
    const { data } = this.data;
    const item = e.target.closest("li");
    if (item) {
      const { index } = item.dataset;
      this.onClick(data[index]);
    }
  }

// constructorì—ì„œ ì´ë²¤íŠ¸ ë“±ë¡ + ì´ë²¤íŠ¸ ìœ„ì„ ë°©ì‹ í™œìš©
 this.$searchResult.addEventListener("click", (e) =>
    this.findIndexWithClick(e)
  );
```

`ImageInfo` ì»´í¬ë„ŒíŠ¸ì—ì„œ ê¸°ì¡´ì— ë°›ì•„ì˜¨ ë°ì´í„°ì— fetchCatInfoë¥¼ ì¶”ê°€ë¡œ ìš”ì²­í•´ì„œ í•©ì¹œë‹¤. ì›¬ë§Œí•˜ë©´ setStateì— asyncë¥¼ ì“°ê³  ì‹¶ì§€ ì•Šì•˜ì§€ë§Œ `onFetchCatInfo`ê°€ ë¹„ë™ê¸°ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ë‹¤ ë°›ì•„ì˜¨ ë’¤ loadingì„ ëë‚´ë„ë¡ awaitë¥¼ ë¶™ì—¬ì¤˜ì•¼ í–ˆë‹¤.

```js
// ImageInfo.js
 async setState(nextData) {
    const loading = new Loading({ $target: this.$target });
    const { image } = nextData;

    await this.onFetchCatInfo(image, nextData);

    loading.closeLoading();
    this.render();
  }
```

### `ì¶”ê°€` ëª¨ë‹¬ ì—´ê³  ë‹«ê¸°ì— fade in/outì„ ì ìš©.

ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‹¬ì— `animation fadeIn`ì„ ë„£ì–´ì„œ blockì´ ë  ë•Œ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ì• ë‹ˆë©”ì´ì…˜ì´ ì ìš©ë˜ì—ˆë‹¤. ì´í›„ setStateë¥¼ í†µí•´ `visibleì´ false`ë¡œ ë³€ê²½ë˜ë©´ fadeOut í´ë˜ìŠ¤ë¥¼ ë¶™ì—¬ì„œ fadeOut ì• ë‹ˆë©”ì´ì…˜ì´ ì ìš©ëœë‹¤.

```css
/* css */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
    visibility: hidden;
  }
}
```

ë°”ë¡œ display: noneì„ ì¤˜ë²„ë¦¬ë©´ ì• ë‹ˆë©”ì´ì…˜ì„ ë„£ì–´ë„ ì‘ë™í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—,
`fadeOut`ì´ ëë‚  ë•Œ `display: none`ì´ ì•„ë‹Œ hiddenì„ ì¤˜ì„œ **ì• ë‹ˆë©”ì´ì…˜ì´ ë‹¤ ë§ˆë¬´ë¦¬ ë˜ê³  ë‚œ í›„**, `setTimeoutìœ¼ë¡œ display: none`ì„ ì¤˜ì„œ DOM ìš”ì†Œì—ì„œ ì—†ì•¤ë‹¤.

```js
// ImageInfo.js
if (!visible) {
  this.$imageInfo.classList.add("fadeOut");
  setTimeout(() => {
    this.$imageInfo.style.display = "none";
  }, variables.animationTime);
}
```

## 4. ê²€ìƒ‰ í˜ì´ì§€

### ê²€ìƒ‰ í˜ì´ì§€ ì§„ì… ì‹œ input focus ì²˜ë¦¬

ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³ (`onInit`) render ë©”ì„œë“œì—ì„œ ì‹¤í–‰ì‹œì¼°ë‹¤.

```js
// SearchInput.js
onInit() {
  this.$searchInput.focus();
}

render() {
  this.onInit();
}
```

### input í´ë¦­ ì‹œ ê¸°ì¡´ í‚¤ì›Œë“œ ì‚­ì œì²˜ë¦¬

ì´ˆê¸°ì—ëŠ” `onResetInputValue` í•¨ìˆ˜ë¥¼ ë”°ë¡œ ë§Œë“¤ì—ˆëŠ”ë°, **ì™¸ë¶€ì—ì„œ Input ê°’ì„ ë³€ê²½í•  ì¼ì´ ì¢…ì¢… ìƒê¸°ì** ìƒˆ valueë¥¼ ë°›ê³ , valueë¥¼ ì„¤ì •í•´ì£¼ëŠ” ë©”ì„œë“œë¡œ ë³€ê²½í–ˆë‹¤.

```js
onSetInputValue(newValue) {
    this.$searchInput.value = newValue;
  }
```

### í•„ìˆ˜ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ, UI ì²˜ë¦¬

```js
if (status === 200) {
  // fetchingí•œ ë°ì´í„°ì˜ status codeê°€ 200ì¼ ë•Œ
      this.$searchResult.innerHTML =
        data.length > 0
          ? data.map(ìˆœíšŒ~~)
          : `<p class="noContent">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ¥²</p>`; // ê²€ìƒ‰ ê²°ê³¼ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ
    } else {
      // 400, 500 ë“±ì˜ ì˜¤ë¥˜ê°€ ìƒê²¼ì„ ë•Œ
      new ErrorMessage({ $target: this.$target, status });
    }
```

### ìµœê·¼ ê²€ìƒ‰ 5ê°œê¹Œì§€ í‚¤ì›Œë“œ êµ¬í˜„

- íŠ¹ì • í‚¤ì›Œë“œë¥¼ ëˆ„ë¥´ë©´ ê²€ìƒ‰.
- ê°€ì¥ ìµœê·¼ì— ê²€ìƒ‰í•œ 5ê°œì˜ í‚¤ì›Œë“œê¹Œì§€ë§Œ
- x ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‚­ì œí•˜ê¸°

#### ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ 5ê°œê¹Œì§€ í‘œì‹œí•˜ê¸°

ê¸°ì¡´ì— SearchInputì—ì„œ ë§Œë“¤ì–´ë†¨ë˜ ë¡œì§ì„ ì¬í™œìš©í•˜ë©´ ë¼ì„œ í¸í–ˆë‹¤. SerchInputì˜ `onSearch` ë©”ì„œë“œëŠ” **ê²€ìƒ‰ í›„ keywordë¥¼ ë°›ì•„ ë°ì´í„°ë¥¼ fetching í•œë‹¤**.
ë¡œì§ì„ ì‚´ì§ ë°”ê¿” App ì»´í¬ë„ŒíŠ¸ì—ì„œ ê´€ë¦¬í•  `keywords` ìƒíƒœë¥¼ ë§Œë“¤ì—ˆë‹¤. ì´í›„ onSearchì—ì„œ keyword ê²€ìƒ‰ì´ ë°œìƒí•˜ë©´ **3ê°€ì§€ ì •ë„ì˜ ë¶„ê¸°ì— ë”°ë¼** keywordsë¥¼ ì €ì¥í•œë‹¤.

1. keywords ë°°ì—´ì— ì´ë¯¸ **ê²€ìƒ‰í•œ í‚¤ì›Œë“œê°€ ìˆëŠ” ê²½ìš°**
   ê¸°ì¡´ì˜ keywordsë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.

2. keywords ë°°ì—´ì— ì´ë¯¸ **ê²€ìƒ‰í•œ í‚¤ì›Œë“œê°€ ì—†ëŠ” ê²½ìš°**
   ì´ë•ŒëŠ” keywords **ë°°ì—´ì˜ ê¸¸ì´ê°€ 5ê°€ ë„˜ëŠ”ì§€ ì•ˆ ë„˜ëŠ”ì§€** êµ¬ë¶„í•´ì¤˜ì•¼ í•œë‹¤.
   - ë„˜ëŠ”ë‹¤ë©´ `í›„ì…ì„ ì¶œ` ë¡œì§ìœ¼ë¡œ ê°€ì¥ ì˜¤ë˜ëœ ë°ì´í„°ë¥¼ shiftë¡œ ì§€ìš°ê³  ìƒˆ ë°ì´í„°ë¥¼ ë„£ëŠ”ë‹¤. - ë„˜ì§€ ì•Šìœ¼ë©´ ê·¸ëŒ€ë¡œ ìƒˆ keywordë¥¼ ë§ˆì§€ë§‰ì— ë„£ì–´ì¤€ë‹¤.

ë°ì´í„°ë¥¼ ë°”ê¿€ ë•ŒëŠ” **ë¶ˆë³€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²Œ ì¤‘ìš”í•˜ë¯€ë¡œ** í•­ìƒ ìƒˆ ì°¸ì¡°ê°’ìœ¼ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤! ë˜ í•­ìƒ setStateë¥¼ í†µí•´ ìƒíƒœë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤.

```js
if (hasSameKeyword) {
  newKeywords = [...this.keywords];
} else {
  if (checkOver5Length) {
    newKeywords = [...this.keywords];
    newKeywords.shift();
    newKeywords.push(keyword);
  } else {
    newKeywords = [...this.keywords, keyword];
  }
}
const nextState = {
  data: response,
  keywords: newKeywords,
};
this.setState(nextState);
```

#### í‚¤ì›Œë“œë¥¼ ëˆ„ë¥¼ ê²½ìš° ê²€ìƒ‰, xë²„íŠ¼ì„ ëˆ„ë¥¼ ê²½ìš° ì‚­ì œ

KeywordList ì»´í¬ë„ŒíŠ¸ëŠ” `$target`, `initialState`, `onDeleteKeyword`, `onClickKeyword` 4ê°€ì§€ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤.
ì™¸ë¶€ì—ì„œ ë©”ì„œë“œë¥¼ ë°›ëŠ” ì´ìœ ëŠ” `ì‚­ì œ ë©”ì„œë“œ`ì—ì„  keywordsë¥¼ ë³´ê´€í•˜ë‹¤ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•´ì•¼í•˜ê¸° ë•Œë¬¸ì´ê³ , `í´ë¦­ ë©”ì„œë“œ`ì—ì„  `SearchInput`ì„ ê±´ë“œë ¤ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ëŠ” ìµœëŒ€í•œ ìˆœìˆ˜í•˜ê²Œ ì‘ì„±í•˜ê³ ì ë…¸ë ¥í–ˆë‹¤.

```js
// App.js
this.keywordList = new keywordList({
  $target,
  initialState: this.keywords,
  onDeleteKeyword: (deletedKeywordList) => {
    this.setState({
      data: this.data,
      keywords: deletedKeywordList,
    });
  },
  onClickKeyword: (keyword) => {
    this.searchInput.onSetInputValue(keyword);
    this.searchInput.onSearch(keyword);
  },
});
```

`ì‚­ì œ ë©”ì„œë“œ`ì—ì„  ì²˜ìŒì— filterë¡œ í´ë¦­í•œ í‚¤ì›Œë“œì™€ ê°™ì€ ê²ƒë§Œ ì‚­ì œí•˜ë ¤ í–ˆëŠ”ë°, **ì¤‘ë³µìœ¼ë¡œ ê°™ì€ keywordê°€ ìˆì„ ê²½ìš° ë‹¤ ì‚­ì œ**ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆë‹¤. ë”°ë¼ì„œ `findIndex`ë¡œ **ì¤‘ë³µëœ ê°’ì¤‘ ì˜¤ë˜ëœ value í•œ ê°œë§Œ ì‚­ì œ**í•˜ë„ë¡ êµ¬í˜„í–ˆë‹¤.

```js
// KeywordList.js
this.$keywordList.addEventListener("click", (e) => {
  switch (e.target.className) {
    case "KeywordClose":
      const button = e.target.closest("button");

      if (button) {
        const findIndex = this.data.findIndex((v) => v === button.value);
        const newData = this.data.filter((v, i) => i !== findIndex);
        onDeleteKeyword(newData);
      }
      break;
    case "KeywordButton":
      onClickKeyword(e.target.value);
      break;
  }
});
```

### ìƒˆë¡œ ê³ ì¹¨ ì‹œ ë§ˆì§€ë§‰ ê²€ìƒ‰ í™”ë©´ ìœ ì§€

ë§ˆì§€ë§‰ ê²€ìƒ‰í™”ë©´ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ì„  ê²°ê³¼ í™”ë©´ì— ë¿Œë ¤ì¤„ `í‚¤ì›Œë“œ ëª©ë¡`, inputì— ë„£ì„ `ë§ˆì§€ë§‰ ê²€ìƒ‰ í‚¤ì›Œë“œ`ê°€ í•„ìš”í•˜ë‹¤.

```js
// App.js
keywords = [];
lastSearchKeyword = "";
```

ê²€ìƒ‰ ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ setStateê°€ ë°œìƒí•˜ë©´ `localStorageì— ì €ì¥`í•˜ê³  Appì´ ë Œë”ë  ë•Œë§ˆë‹¤ `localStorage` ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.

```js
// App.js
setState(nextData) {
    const { data, keywords } = nextData;
    this.data = data;
    this.keywords = keywords;
    this.searchResult.setState(data);
    this.keywordList.setState(keywords);

    // @NOTE: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë³€ê²½ëœ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.
    const setLocalStorage = {
      keywords,
      lastSearchKeyword: this.lastSearchKeyword,
    };
    setItem(localKey.SEARCH_RESULT_KEY, JSON.stringify(setLocalStorage));
  }
```

```js
// App.js
// @NOTE: Appì´ ë Œë”ë˜ë©´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°’ì„ ê°€ì ¸ì˜¨ ë’¤ ì´ˆê¸°í™” ì‹œí‚¨ë‹¤.
constructor($target) {
    const getLocalResult = JSON.parse(getItem(localKey.SEARCH_RESULT_KEY));
    if (getLocalResult) {
      const { keywords, lastSearchKeyword } = getLocalResult;
      this.keywords = keywords;
      this.lastSearchKeyword = lastSearchKeyword;
    }
}
```

ë‘ ê°’ì„ ìµœìƒë‹¨ì—ì„œ ê°–ê³  ìˆë‹¤ê°€ ê° ì»´í¬ë„ŒíŠ¸ì— `initialState`ë¡œ ë„£ì–´ì£¼ì–´ ì²« ë Œë” ì‹œì— í™”ë©´ì— ë¿Œë ¤ì¤€ë‹¤.

```js
this.searchInput = new SearchInput({
  $target,
  initialState: this.lastSearchKeyword,
  // ... ìƒëµ
});

this.keywordList = new keywordList({
  $target,
  initialState: this.keywords,
  // ... ìƒëµ
});
```

ì´ë¯¸ **ë§ˆì§€ë§‰ í‚¤ì›Œë“œë¥¼ ì²« ë Œë”ì‹œì— ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ì ¸ì˜¤ë¯€ë¡œ**, ê°€ì ¸ì˜¨ ê°’ì´ ì¡´ì¬í•œë‹¤ë©´ SearchInputì—ì„œ ì´ˆê¸°í™” ì‹œ ê²€ìƒ‰ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤. ì½”ë“œ ëª‡ ì¤„ë¡œ ë§ˆì§€ë§‰ ê²€ìƒ‰ í™”ë©´ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤ë‹ˆ ì°¸ í¸ë¦¬í•˜ë‹¤ â˜ºï¸

```js
// SearchInput.js
constructor({ $target, initialState, onSearch }) {
    if (initialState) this.onSearch(initialState);
}
```

### 50ë§ˆë¦¬ ëœë¤ ê³ ì–‘ì´ ì‚¬ì§„ ë¿Œë¦¬ê¸°

Appì˜ setStateëŠ” `ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡`ê³¼ `í‚¤ì›Œë“œ ëª©ë¡`ì„ ë°›ì•„ ê° ì»´í¬ë„ŒíŠ¸ì— ì €ì¥í•´ì£¼ë¯€ë¡œ, ëœë¤ ê³ ì–‘ì´ ì‚¬ì§„ì„ ë°›ì•„ì™€ setStateë¥¼ ë°œìƒì‹œí‚¤ë©´ ì•Œì•„ì„œ ìœ ê¸°ì ìœ¼ë¡œ ë™ì‘í•œë‹¤.

```js
// App.js
this.randomButton = new RandomButton({
  $target,
  fetchRandomCats: async () => {
    const loading = new Loading({ $target });
    const response = await api.fetchRandomCats();

    this.setState({
      data: response,
      keywords: this.keywords,
    });
    loading.closeLoading();
  },
});
```

### ì´ë¯¸ì§€ lazy ë¡œë”© ì²˜ë¦¬í•˜ê¸°

#### ğŸš€ Troble Shooting

`Lazy loading`ì´ë€ viewportì— ë³´ì¼ ì´ë¯¸ì§€ë“¤ë§Œ ë°›ê³ , ë‚˜ì €ë¯¸ ì†ŒìŠ¤ë“¤ì€ ëŒ€ê¸°ì‹œí‚¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì–´ë– í•œ ëŒ€ìƒì´ viewportì— ë“¤ì–´ì™”ëŠ”ì§€ ì§€ì†ì ìœ¼ë¡œ ê´€ì°°í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë™ê¸°ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” scroll ì´ë²¤íŠ¸ë³´ë‹¤ **ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” `InterceptorObserver API` ë¥¼ í™œìš©**í•˜ë©´ ì¢‹ë‹¤.
`InterceptionObserver(IO)`ëŠ” `target`ê³¼ `root(ê¸°ë³¸ viewport)`ì˜ êµì°¨ì ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ê´€ì°°í•˜ëŠ” web API ì´ë‹¤. ì¸ìˆ˜ë¡œ callbackê³¼ optionsì„ ë°›ì•„ targetì´ rootì— ì§„ì…í–ˆì„ ë•Œ ì²˜ë¦¬í•  ì‘ì—…ì„ `callback`ì— ì‘ì„±í•˜ë©´ ëœë‹¤.
**ì „ì²´ì ì¸ í”„ë¡œì„¸ìŠ¤ëŠ” img srcë¥¼ ë¹„ì›Œë’€ë‹¤ê°€ êµì°¨ì ì— ì§„ì…í–ˆì„ ë•Œ data-srcì— ì €ì¥ë˜ì–´ ìˆë˜ ê°’ì„ srcë¡œ ì˜®ê²¨ì£¼ëŠ” ê²ƒ**ì´ë‹¤.

1. ìš°ì„  IOë¥¼ ìƒì„±í•˜ê³  callbackê³¼ optionsë¥¼ ì„ ì–¸í•œë‹¤.
2. imgì— lazy í´ë˜ìŠ¤ë¥¼ ë¶™ì´ê³  ëŒë©´ì„œ `observe` ë©”ì„œë“œë¡œ ë“±ë¡í•´ì¤€ë‹¤.

```js
lazyLoadObserver() {
    const options = { threshold: 0.5 };
    const callback = (entries, observer) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          entry.target.src = entry.target.dataset.src;
        }
      });
    };
    const io = new IntersectionObserver(callback, options);
    // @NOTE: ê´€ì°° ëŒ€ìƒë“¤ì„ observe ë©”ì„œë“œë¡œ ë“±ë¡í•œë‹¤.
    const lazyImages = Array.from(document.querySelectorAll(".lazy"));
    lazyImages.forEach((image) => {
      io.observe(image);
    });
  }
```

3. callbackì˜ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì¸ `entries`ì—” ê° ëŒ€ìƒë“¤ì´ êµì°¨ì ì— ì§„ì…í–ˆëŠ”ì§€ ì—¬ë¶€ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ê²ƒë“¤ë„ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.
   ![image](https://user-images.githubusercontent.com/68528752/157995877-ad390e7f-c1d9-4cf3-8a75-1eda368cda19.png)

4. targetì´ `isIntersecting`(ì§„ì… ì—¬ë¶€)ë¼ë©´, ì´ë¯¸ ì§„ì…í–ˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ `unobserve(ê´€ì°° í•´ì œ)` ì‹œí‚¤ê³ , `data-src`ì— ì €ì¥í–ˆë˜ ì´ë¯¸ì§€ ê²½ë¡œë¥¼ srcë¡œ ì˜®ê¸´ë‹¤.
   unobserve ì‹œí‚¤ëŠ” ì´ìœ ëŠ” ë‹¤ì‹œ ìœ„ë¡œ ì˜¬ë ¸ì„ ë•Œ ê°™ì€ ì•¡ì…˜ì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.

### ê³ ì–‘ì´ ì‚¬ì§„ hover ì‹œ ì´ë¦„ ë…¸ì¶œ

Tooltip ì´ë¼ëŠ” íƒœê·¸ë¥¼ ë§Œë“¤ê³ , hoverì‹œì— `visibility` ê°’ì„ ë³€ê²½í•œë‹¤. visibilityë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” **visibilityê°€ DOMì— ë‚¨ì•„ìˆê¸° ë•Œë¬¸ì— ë¦¬í”Œë¡œìš°ê°€ ì¼ì–´ë‚˜ì§€ ì•Šì•„** ë Œë”ë§ ìµœì í™”ì— ë„ì›€ì´ ëœë‹¤.

```js
 <li class="item" data-index=${index}>
  <img class="lazy" data-src=${cat.url} alt=${cat.name} />
  <span class="Tooltip">${cat.name}</span> // NOTE: Tooltip ì¶”ê°€
</li>
```

```css
.SearchResult .item:hover .Tooltip {
  visibility: visible;
}

.Tooltip {
  visibility: hidden;
  position: absolute;
  min-width: 120px;
  bottom: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: var(--color-dark);
  color: var(--color-light);
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;
}

.Tooltip::after {
  content: " ";
  position: absolute;
  top: 100%;
  left: 50%;
  border-style: solid;
  border-width: 5px;
  border-color: var(--color-dark) transparent transparent transparent;
}
```

## 5. ìŠ¤í¬ë¡¤ í˜ì´ì§• êµ¬í˜„

ë¶€ë¶„ì ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” APIê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ **ê¸°ì¡´ ë°ì´í„°ë¥¼ ì „ì²´ì ìœ¼ë¡œ ë°›ê³  10ê°œì”© ëŠì–´ì„œ** ë¶ˆëŸ¬ì˜¤ê²Œë” í–ˆë‹¤.

```js
// variable.js
export const variables = {
  countGetDataOnce: 10, // í•œë²ˆì— ëª‡ê°œê¹Œì§€ ë°›ì„ì§€ ìƒìˆ˜í™”
};
```

ìŠ¤í¬ë¡¤ í˜ì´ì§•ë„ IOë¥¼ í™œìš©í•œë‹¤. targetì„ **ulì˜ ê°€ì¥ ë§ˆì§€ë§‰ì— ìœ„ì¹˜**ì‹œí‚¤ê³ , IOë¡œ ê°ì‹œí•˜ë©° êµì°¨í–ˆì„ ë•Œ callback í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤. liê°€ ê¸¸ì–´ì§€ë©´ ì•Œì•„ì„œ targetì´ ë’¤ë¡œ ë°€ë¦¬ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ë‹¤ ë°›ì§€ ì•ŠëŠ” ì´ìƒ unobserve ì‹œí‚¬ í•„ìš”ê°€ ì—†ë‹¤.

```js
// SearchResult.js
// @NOTE: ì•ˆë³´ì´ëŠ” target ìƒì„±
this.$lastPage = document.createElement("span");
this.$lastPage.className = "LastPage";
$target.appendChild(this.$lastPage);
```

IO ë¡œì§ì„ ì„¤ëª…í•˜ê¸° ì „ì— ìš°ì„  ë°ì´í„°ë¥¼ ìë¥´ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í•˜ë‹¤. `combineData`ëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ë°›ê³  limit ê°’ì— ë”°ë¼ ìƒˆ ë°ì´í„°ë¥¼ ë¦¬í„´í•œë‹¤. ëŠì–´ë°›ì„ limit ë°ì´í„°ëŠ” ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹°ë¥¼ í™œìš©í–ˆë‹¤.

```js
  combineData(originData) {
    // @NOTE: this.dataLimitì— ë”°ë¼ ì›ë³¸ ë°ì´í„°ë¥¼ ìë¥´ê³  ë¦¬í„´
    const { data, status } = originData;
    if (status === 200) {
      const nextData = [...data].slice(
        0,
        this.dataLimit * variables.countGetDataOnce
      );
      return { status, data: nextData };
    } else {
      return { status, data: data };
    }
  }
```

`combineData`ëŠ” **ì›ë³¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…**ì´ê¸° ë•Œë¬¸ì—, setState í•¨ìˆ˜ ë‚´ì—ì„œ í™œìš©ë˜ì–´ì•¼ í•œë‹¤. setStateê°€ `ì™¸ë¶€ì—ì„œ fetchí•œ ë°ì´í„°ë¥¼ ì €ì¥`í•  ë•Œë„ ì‚¬ìš©ë˜ê³ , `ë¬´í•œ ìŠ¤í¬ë¡¤ ë•Œì—ë„ í™œìš©`ë˜ë¯€ë¡œ ë‘ ê°€ì§€ë¥¼ ì˜ êµ¬ë¶„í•´ì•¼ í•œë‹¤.
íŠ¹íˆ ë¬´í•œìŠ¤í¬ë¡¤ ì‹œì— ê¸°ì¡´ì˜ dataê°€ ë³€ê²½ë˜ë¯€ë¡œ, **ì›ë³¸ ë°ì´í„°ë¥¼ ì €ì¥í•  í•„ìš”ê°€ ìˆë‹¤**. ì›ë³¸ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•ŒëŠ” ë¬´í•œ ìŠ¤í¬ë¡¤ ì‹œì— ë°ì´í„° ë³´ë‹¤ ê¸¸ì´ê°€ ë¬´ì¡°ê±´ í¬ê±°ë‚˜ ê°™ìœ¼ë¯€ë¡œ ê·¸ë•Œ ì €ì¥í•´ì¤€ë‹¤.

```js
  setState(nextData) {
    const { status, data } = nextData;
    if (status === 200 && data.length > variables.countGetDataOnce) {
      // @NOTE: í•˜ë‚˜ì˜ setStateì—ì„œ ë¬´í•œìŠ¤í¬ë¡¤ì„ ìœ„í•œ ì²˜ë¦¬, ì™¸ë¶€ì—ì„œ ë°ì´í„° ë°›ëŠ” ì²˜ë¦¬ êµ¬ë¶„
      // @NOTE: ì™¸ë¶€ì—ì„œ ë°›ì€ ë°ì´í„° ê¸¸ì´ê°€ ë¬´í•œìŠ¤í¬ë¡¤ ê¸¸ì´ë³´ë‹¤ í¬ë‹¤ë©´ ì›ë³¸ ë°ì´í„°!
      this.originData = nextData;
    }
    this.data = this.combineData(nextData);
    this.render();
    this.lazyLoadObserver();
    this.scrollPagingObserver();
  }
```

<br>

IO ë¡œì§ì„ ì„¤ëª…í•  ì°¨ë¡€ë‹¤. ì¤‘ìš”í•œ ê²ƒì€ `IOì—ì„œ setState`ëŠ” í•­ìƒ **originDataë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ”ë‹¤ëŠ” ê²ƒ**ì´ë‹¤. ê·¸ë˜ì•¼ë§Œ ì›ë³¸ ë°ì´í„°ë¥¼ ë°›ì•„ sliceê°€ limit ê¸¸ì´ë§Œí¼ ìë¥¼ ìˆ˜ê°€ ìˆë‹¤. ì´ ë•Œë¬¸ì— originDataë¥¼ ì €ì¥í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í–ˆë˜ ê²ƒì´ë‹¤.
targetì´ ë·°í¬íŠ¸ì— ì§„ì…í–ˆë‹¤ë©´ `limit`ê°’ì„ ë†’ì´ê³  `setState`ë¥¼ ì‹¤í–‰í•œë‹¤.
**ë§Œì•½ ë¬´í•œ ìŠ¤í¬ë¡¤ ë°ì´í„°ê°€ ì´ë¯¸ ë‹¤ ë°›ì•„ì¡Œë‹¤ë©´** targetì„ `unobserve` í•˜ì—¬ ë”ì´ìƒ callbackì„ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.

```js
scrollPagingObserver() {
    const options = { threshold: 0 };
    const callback = (entries, observer) => {
      const { status, data } = this.data;
      const { data: originList } = this.originData;

      // @NOTE: ë°›ì•„ì˜¨ ë°ì´í„°ê°€ ì›ë³¸ ë°ì´í„° ê¸¸ì´ì™€ ê°™ë‹¤ë©´
      if (data.length === originList.length) {
        observer.unobserve(this.$lastPage);
        return;
      }
      entries.forEach((entry) => {
        if (entry.isIntersecting && status === 200) {
          this.dataLimit++;
          this.setState(this.originData);
        }
      });
    };
    const io = new IntersectionObserver(callback, options);
    io.observe(this.$lastPage);
  }
```

ë§ˆì§€ë§‰ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ì„ ë•Œ Lazy-loading ë•Œë¬¸ì— **ì²« ë Œë”ë§ ì‹œ ì¼ì‹œì ìœ¼ë¡œ ì´ë¯¸ì§€ì˜ altê°’ì´ ë…¸ì¶œë˜ë©´ì„œ ë†’ì´ê°€ ì¤„ì–´ë“ ë‹¤**. ì´ëŠ” targetì´ viewportì— ë…¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— imgì˜ `ìµœì†Œ height`ì„ ì¤˜ì„œ targetì´ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ í•´ì•¼í•œë‹¤.

```css
.SearchResult img {
  min-height: 200px;
}
```

## 6. webpack ì„¤ì • ë° ë°°í¬

ì´ë²ˆì—ëŠ” firebaseë¥¼ í™œìš©í•´ ë°°í¬ë¥¼ ì§„í–‰í–ˆë‹¤. firebaseëŠ” ë¹Œë“œëœ ì •ì íŒŒì¼ë¡œ ë°°í¬ê°€ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì— webpackì„ í†µí•´ ë²ˆë“¤ë§í–ˆë‹¤. ì‚¬ì‹¤ ì‘ì€ í”„ë¡œì íŠ¸ì— ë„ˆë¬´ ê±°ì°½í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì¶”ê°€í•œ ê²ƒ ê°™ì€ë° ì‹¤ë¬´ê°™ì€ ë§ˆìŒìœ¼ë¡œ ì„í•˜ê³ ì ë‹¤ì–‘í•˜ê²Œ í™œìš©í•´ë³´ì•˜ë‹¤. ê° í”ŒëŸ¬ê·¸ì¸ê³¼ ë¡œë”ë“¤ì˜ í™œìš©ë°©ì•ˆì€ ì•„ë˜ì™€ ê°™ë‹¤.

```js
const HtmlWebpackPlugin = require("html-webpack-plugin"); // htmlì„ ì½ê³  minify í•˜ê¸° ìœ„í•¨
const MiniCssExtractPlugin = require("mini-css-extract-plugin"); // cssë¥¼ ì½ê³  ë”°ë¡œ ì¶”ì¶œí•˜ê¸° ìœ„í•¨
const CssMinimizerPlugin = require("css-minimizer-webpack-plugin"); // css íŒŒì¼ì„ minify í•˜ê¸° ìœ„í•¨
const { CleanWebpackPlugin } = require("clean-webpack-plugin"); // build ë  ë•Œ ê¸°ì¡´ì— ë‚¨ì•„ìˆë˜ íŒŒì¼ì„ ì‚­ì œí•˜ê¸° ìœ„í•¨
const TerserPlugin = require("terser-webpack-plugin"); // jsë¥¼ minify, uglify í•˜ê¸° ìœ„í•¨
```

```js
const path = require("path");

module.exports = {
  mode: "production", // production ëª¨ë“œë¡œ í•´ì•¼ íŒŒì¼ë“¤ì´ uglify ëœë‹¤ê³  í•¨.
  entry: "./src/main.js",
  output: {
    filename: "main.js",
    path: path.resolve(__dirname, "public"),
  },
  plugins: [
    new HtmlWebpackPlugin({
      // html íŒŒì¼ ì¶”ì¶œ
      template: "index.html",
      inject: true,
    }),
    new MiniCssExtractPlugin({}), // css íŒŒì¼ ë³„ë„ ì¶”ì¶œ
    new CleanWebpackPlugin(), // ë²ˆë“¤ì‹œ ê¸°ì¡´ public í´ë” ë‚´ ì´ˆê¸°í™”
  ],
  module: {
    rules: [
      {
        test: /\.css$/,
        include: /src/,
        use: [MiniCssExtractPlugin.loader, "css-loader"], // css íŒŒì¼ì„ ì½ê³  ë”°ë¡œ ì¶”ì¶œ
      },
      {
        test: /\.html$/,
        use: [
          {
            loader: "html-loader",
            options: { minimize: true }, // html íŒŒì¼ minify
          },
        ],
      },
    ],
  },
  optimization: {
    minimize: true,
    minimizer: [
      // css, js minize, js uglify
      new CssMinimizerPlugin(),
      new TerserPlugin(),
    ],
  },
};
```
